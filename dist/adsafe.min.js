/**
 * @preserve
 * @author Douglas Crockford <douglas@crockford.com>
 * @version 1.0.3
 * @description ADsafe, the JavaScript widget framework for advertising and mashups
 */
!function(root,factory){"use strict";"function"==typeof define&&define.amd?define("ADSAFE",factory):"object"==typeof exports?module.exports=factory():root.ADSAFE=factory()}(window,function(){var ADSAFE=function(){function error(message){throw ADSAFE.log("ADsafe error: "+(message||"ADsafe violation.")),{name:"ADsafe",message:message||"ADsafe violation."}}function string_check(string){return"string"!=typeof string&&error("ADsafe string violation."),string}function owns(object,string){return object&&"object"==typeof object&&Object.prototype.hasOwnProperty.call(object,string_check(string))}function reject_name(name){return"number"!=typeof name&&("string"!=typeof name||banned[name]||"_"===name.charAt(0)||"_"===name.slice(-1))}function reject_property(object,name){return"object"!=typeof object||reject_name(name)}function reject_global(that){that.window&&error()}function getStyleObject(node){return node===cache_style_node?cache_style_object:(cache_style_node=node,cache_style_object=node.currentStyle||defaultView.getComputedStyle(node,""))}function walkTheDOM(node,func,skip){for(skip||func(node),node=node.firstChild;node;)walkTheDOM(node,func),node=node.nextSibling}function purge_event_handlers(node){walkTheDOM(node,function(node){node.tagName&&(node["___ on ___"]=null,node.change=null)})}function parse_query(text,id){var match,selector,query=[],qx=id?/^\s*(?:([\*\/])|\[\s*([a-z][0-9a-z_\-]*)\s*(?:([!*~\|$\^]?=)\s*([0-9A-Za-z_\-*%&;.\/:!]+)\s*)?\]|#\s*([A-Z]+_[A-Z0-9]+)|:\s*([a-z]+)|([.&_>\+]?)\s*([a-z][0-9a-z\-]*))\s*/:/^\s*(?:([\*\/])|\[\s*([a-z][0-9a-z_\-]*)\s*(?:([!*~\|$\^]?=)\s*([0-9A-Za-z_\-*%&;.\/:!]+)\s*)?\]|#\s*([\-A-Za-z0-9_]+)|:\s*([a-z]+)|([.&_>\+]?)\s*([a-z][0-9a-z\-]*))\s*/;do{match=qx.exec(string_check(text)),match||error("ADsafe: Bad query:"+text),match[1]?selector={op:match[1]}:match[2]?selector=match[3]?{op:"["+match[3],name:match[2],value:match[4]}:{op:"[",name:match[2]}:match[5]?((query.length>0||match[5].length<=id.length||match[5].slice(0,id.length)!==id)&&error("ADsafe: Bad query: "+text),selector={op:"#",name:match[5]}):selector=match[6]?{op:":"+match[6]}:{op:match[7],name:match[8]},query.push(selector),text=text.slice(match[0].length)}while(text);return query}function quest(query,nodes){var selector,func,i,j;for(i=0;i<query.length;i+=1){if(selector=query[i],name=selector.name,"function"==typeof(func=hunter[selector.op]))for(star&&error("ADsafe: Query violation: *"+selector.op+(selector.name||"")),result=[],j=0;j<nodes.length;j+=1)func(nodes[j]);else if(value=selector.value,flipflop=!1,"function"!=typeof(func=pecker[selector.op]))switch(selector.op){case":first":result=nodes.slice(0,1);break;case":rest":result=nodes.slice(1);break;default:error("ADsafe: Query violation: :"+selector.op)}else for(result=[],j=0;j<nodes.length;j+=1)func(nodes[j])&&result.push(nodes[j]);nodes=result}return result}function make_root(root,id){function Bunch(nodes){this.___nodes___=nodes,this.___star___=star&&nodes.length>1,star=!1}id?"DIV"!==root.tagName&&error("ADsafe: Bad node."):"BODY"!==root.tagName&&error("ADsafe: Bad node.");var dom,allow_focus=!0,dom_event=function(ev){var key,target,that,the_event,the_target,the_actual_event=ev||event,type=the_actual_event.type;switch(the_target=the_actual_event.target||the_actual_event.srcElement,target=new Bunch([the_target]),that=target,type){case"mousedown":allow_focus=!0,document.selection&&(the_range=document.selection.createRange());break;case"focus":case"focusin":allow_focus=!0,has_focus=the_target,the_actual_event.cancelBubble=!1,type="focus";break;case"blur":case"focusout":allow_focus=!1,has_focus=null,type="blur";break;case"keypress":switch(allow_focus=!0,has_focus=the_target,key=String.fromCharCode(the_actual_event.charCode||the_actual_event.keyCode)){case"\r":case"\n":type="enterkey";break;case"":type="escapekey"}break;case"click":allow_focus=!0}if(the_actual_event.cancelBubble&&the_actual_event.stopPropagation&&the_actual_event.stopPropagation(),the_event={altKey:the_actual_event.altKey,ctrlKey:the_actual_event.ctrlKey,bubble:function(){try{var parent=that.getParent(),b=parent.___nodes___[0];that=parent,the_event.that=that,b["___ on ___"]&&b["___ on ___"][type]?that.fire(the_event):the_event.bubble()}catch(e){error(e)}},key:key,preventDefault:function(){the_actual_event.preventDefault&&the_actual_event.preventDefault(),the_actual_event.returnValue=!1},shiftKey:the_actual_event.shiftKey,target:target,that:that,type:type,x:the_actual_event.clientX,y:the_actual_event.clientY},the_target["___ on ___"]&&the_target["___ on ___"][the_event.type])target.fire(the_event);else for(;;){if(!(the_target=the_target.parentNode))break;if(the_target["___ on ___"]&&the_target["___ on ___"][the_event.type]){that=new Bunch([the_target]),the_event.that=that,that.fire(the_event);break}if(the_target["___adsafe root___"])break}"escapekey"===the_event.type&&(ephemeral&&ephemeral.remove(),ephemeral=null),that=null,the_actual_event=null,the_event=null,the_target=null};return root["___adsafe root___"]="___adsafe root___",Bunch.prototype={append:function(appendage){reject_global(this);var i,j,node,rep,b=this.___nodes___,flag=!1;if(0===b.length||!appendage)return this;if(Array.isArray(appendage))for(appendage.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)for(rep=appendage[i].___nodes___,j=0;j<rep.length;j+=1)b[i].appendChild(rep[j]);else for("string"!=typeof appendage&&(rep=appendage.___nodes___),i=0;i<b.length;i+=1)if(node=b[i],rep){for(j=0;j<rep.length;j+=1)node.appendChild(flag?rep[j].cloneNode(!0):rep[j]);flag=!0}else node.appendChild(document.createTextNode(appendage));return this},blur:function(){reject_global(this);var i,node,b=this.___nodes___;for(has_focus=null,i=0;i<b.length;i+=1)node=b[i],node.blur&&node.blur();return this},check:function(value){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.checked=!!value[i]);else for(i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.checked=!!value);return this},class:function(value){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)/url/i.test(string_check(value[i]))&&error("ADsafe error."),node=b[i],node.tagName&&(node.className=value[i]);else for(/url/i.test(string_check(value))&&error("ADsafe error."),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.className=value);return this},clone:function(deep,n){var c,i,j,a=[],b=this.___nodes___,k=n||1;for(i=0;i<k;i+=1){for(c=[],j=0;j<b.length;j+=1)c.push(b[j].cloneNode(deep));a.push(new Bunch(c))}return n?a:a[0]},count:function(){return reject_global(this),this.___nodes___.length},each:function(func){reject_global(this);var i,b=this.___nodes___;if("function"==typeof func){for(i=0;i<b.length;i+=1)func(new Bunch([b[i]]));return this}error()},empty:function(){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)for(node=b[i];node.firstChild;)purge_event_handlers(node),node.removeChild(node.firstChild);else for(i=0;i<b.length;i+=1)for(node=b[i];node.firstChild;)purge_event_handlers(node),node.removeChild(node.firstChild);return this},enable:function(enable){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(enable))for(enable.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+enable.length),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.disabled=!enable[i]);else for(i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.disabled=!enable);return this},ephemeral:function(){return reject_global(this),ephemeral&&ephemeral.remove(),ephemeral=this,this},explode:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=new Bunch([b[i]]);return a},fire:function(event){reject_global(this);var array,b,i,j,n,node,on,type;for("string"==typeof event?(type=event,event={type:type}):"object"==typeof event?type=event.type:error(),b=this.___nodes___,n=b.length,i=0;i<n;i+=1)if(node=b[i],on=node["___ on ___"],owns(on,type))for(array=on[type],j=0;j<array.length;j+=1)array[j].call(this,event);return this},focus:function(){reject_global(this);var b=this.___nodes___;if(b.length>0&&allow_focus)return has_focus=b[0].focus(),this;error()},fragment:function(){return reject_global(this),new Bunch([document.createDocumentFragment()])},getCheck:function(){return this.getChecks()[0]},getChecks:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].checked;return a},getClass:function(){return this.getClasses()[0]},getClasses:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].className;return a},getMark:function(){return this.getMarks()[0]},getMarks:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i]["_adsafe mark_"];return a},getName:function(){return this.getNames()[0]},getNames:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].name;return a},getOffsetHeight:function(){return this.getOffsetHeights()[0]},getOffsetHeights:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].offsetHeight;return a},getOffsetWidth:function(){return this.getOffsetWidths()[0]},getOffsetWidths:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].offsetWidth;return a},getParent:function(){reject_global(this);var i,n,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)n=b[i].parentNode,n["___adsafe root___"]&&error("ADsafe parent violation."),a[i]=n;return new Bunch(a)},getSelection:function(){reject_global(this);var end,node,start,range,b=this.___nodes___;if(1===b.length&&allow_focus){if(node=b[0],"number"==typeof node.selectionStart)return start=node.selectionStart,end=node.selectionEnd,node.value.slice(start,end);if(range=node.createTextRange(),range.expand("textedit"),range.inRange(the_range))return the_range.text}return null},getStyle:function(name){return this.getStyles(name)[0]},getStyles:function(name){reject_global(this),reject_name(name)&&error("ADsafe style violation.");var i,node,s,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)node=b[i],node.tagName&&"string"==typeof(s="float"!==name?getStyleObject(node)[name]:getStyleObject(node).cssFloat||getStyleObject(node).styleFloat)&&(a[i]=s);return a},getTagName:function(){return this.getTagNames()[0]},getTagNames:function(){reject_global(this);var i,tagName,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)tagName=b[i].tagName,a[i]="string"==typeof tagName?tagName.toLowerCase():tagName;return a},getTitle:function(){return this.getTitles()[0]},getTitles:function(){reject_global(this);var i,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)a[i]=b[i].title;return a},getValue:function(){return this.getValues()[0]},getValues:function(){reject_global(this);var i,node,a=[],b=this.___nodes___;for(i=0;i<b.length;i+=1)node=b[i],"#text"===node.nodeName?a[i]=node.nodeValue:node.tagName&&"password"!==node.type&&(a[i]=node.value,!a[i]&&node.firstChild&&"#text"===node.firstChild.nodeName&&(a[i]=node.firstChild.nodeValue));return a},indeterminate:function(value){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.indeterminate=!!value[i]);else for(i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.indeterminate=!!value);return this},klass:function(value){return this.class(value)},mark:function(value){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node["_adsafe mark_"]=String(value[i]));else for(i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node["_adsafe mark_"]=String(value));return this},off:function(type){reject_global(this);var i,node,b=this.___nodes___;for(i=0;i<b.length;i+=1)node=b[i],"string"==typeof type?"object"==typeof node["___ on ___"]&&(node["___ on ___"][type]=null):node["___ on ___"]=null;return this},on:function(type,func){reject_global(this),"string"==typeof type&&"function"==typeof func||error();var i,node,on,ontype,b=this.___nodes___;for(i=0;i<b.length;i+=1)node=b[i],"change"===type&&(ontype="on"+type,node[ontype]!==dom_event&&(node[ontype]=dom_event)),on=node["___ on ___"],on||(on={},node["___ on ___"]=on),owns(on,type)?on[type].push(func):on[type]=[func];return this},protect:function(){reject_global(this);var i,b=this.___nodes___;for(i=0;i<b.length;i+=1)b[i]["___adsafe root___"]="___adsafe root___";return this},q:function(text){return reject_global(this),star=this.___star___,new Bunch(quest(parse_query(string_check(text),id),this.___nodes___))},remove:function(){reject_global(this),this.replace()},replace:function(replacement){reject_global(this);var i,j,newnode,node,parent,rep,b=this.___nodes___,flag=!1;if(0!==b.length){for(i=0;i<b.length;i+=1)purge_event_handlers(b[i]);if(!replacement||0===replacement.length||replacement.___nodes___&&0===replacement.___nodes___.length)for(i=0;i<b.length;i+=1)node=b[i],purge_event_handlers(node),node.parentNode&&node.parentNode.removeChild(node);else if(Array.isArray(replacement)){for(replacement.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)if(node=b[i],parent=node.parentNode,purge_event_handlers(node),parent)if(rep=replacement[i].___nodes___,rep.length>0)for(newnode=rep[0],parent.replaceChild(newnode,node),j=1;j<rep.length;j+=1)node=newnode,newnode=rep[j],parent.insertBefore(newnode,node.nextSibling);else parent.removeChild(node)}else for(rep=replacement.___nodes___,i=0;i<b.length;i+=1)if(node=b[i],purge_event_handlers(node),parent=node.parentNode){for(newnode=flag?rep[0].cloneNode(!0):rep[0],parent.replaceChild(newnode,node),j=1;j<rep.length;j+=1)node=newnode,newnode=flag?rep[j].clone(!0):rep[j],parent.insertBefore(newnode,node.nextSibling);flag=!0}return this}},select:function(){reject_global(this);var b=this.___nodes___;return(b.length<1||!allow_focus)&&error(),b[0].focus(),b[0].select(),this},selection:function(string){reject_global(this),string_check(string);var end,node,old,start,range,b=this.___nodes___;return 1===b.length&&allow_focus&&(node=b[0],"number"==typeof node.selectionStart?(start=node.selectionStart,end=node.selectionEnd,old=node.value,node.value=old.slice(0,start)+string+old.slice(end),node.selectionStart=start+string.length,node.selectionEnd=start+string.length,node.focus()):(range=node.createTextRange(),range.expand("textedit"),range.inRange(the_range)&&(the_range.select(),the_range.text=string,the_range.select()))),this},style:function(name,value){reject_global(this),reject_name(name)&&error("ADsafe style violation."),(void 0===value||/url/i.test(string_check(value)))&&error();var i,node,v,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)node=b[i],v=string_check(value[i]),/url/i.test(v)&&error(),node.tagName&&("float"!==name?node.style[name]=v:(node.style.cssFloat=v,node.style.styleFloat=v));else for(v=string_check(value),/url/i.test(v)&&error(),i=0;i<b.length;i+=1)node=b[i],node.tagName&&("float"!==name?node.style[name]=v:(node.style.cssFloat=v,node.style.styleFloat=v));return this},tag:function(tag,type,name){reject_global(this);var node;return"string"!=typeof tag&&error(),makeableTagName[tag]!==!0&&error("ADsafe: Bad tag: "+tag),node=document.createElement(tag),name&&(node.autocomplete="off",node.name=string_check(name)),type&&(node.type=string_check(type)),new Bunch([node])},text:function(text){reject_global(this);var a,i;if(Array.isArray(text)){for(a=[],i=0;i<text.length;i+=1)a[i]=document.createTextNode(string_check(text[i]));return new Bunch(a)}return new Bunch([document.createTextNode(string_check(text))])},title:function(value){reject_global(this);var i,node,b=this.___nodes___;if(Array.isArray(value))for(value.length!==b.length&&error("ADsafe: Array length: "+b.length+"-"+value.length),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.title=string_check(value[i]));else for(string_check(value),i=0;i<b.length;i+=1)node=b[i],node.tagName&&(node.title=value);return this},value:function(value){reject_global(this),void 0===value&&error();var i,node,b=this.___nodes___;if(Array.isArray(value)&&b.length===value.length)for(i=0;i<b.length;i+=1)if(node=b[i],node.tagName){if("password"!==node.type)if("string"==typeof node.value)node.value=value[i];else{for(;node.firstChild;)purge_event_handlers(node.firstChild),node.removeChild(node.firstChild);node.appendChild(document.createTextNode(String(value[i])))}}else"#text"===node.nodeName&&(node.nodeValue=String(value[i]));else for(value=String(value),i=0;i<b.length;i+=1)if(node=b[i],node.tagName)if("BUTTON"!==node.tagName&&"string"==typeof node.value)node.value=value;else{for(;node.firstChild;)purge_event_handlers(node.firstChild),node.removeChild(node.firstChild);node.appendChild(document.createTextNode(value))}else"#text"===node.nodeName&&(node.nodeValue=value);return this}},dom={append:function(bunch){var i,n,b="string"==typeof bunch?[document.createTextNode(bunch)]:bunch.___nodes___;for(i=0;i<b.length;i+=1)n=b[i],"string"!=typeof n&&"number"!=typeof n||(n=document.createTextNode(String(n))),root.appendChild(n);return dom},combine:function(array){array&&array.length||error("ADsafe: Bad combination.");var i,b=array[0].___nodes___;for(i=0;i<array.length;i+=1)b=b.concat(array[i].___nodes___);return new Bunch(b)},count:function(){return 1},ephemeral:function(bunch){return ephemeral&&ephemeral.remove(),ephemeral=bunch,dom},fragment:function(){return new Bunch([document.createDocumentFragment()])},prepend:function(bunch){var i,b=bunch.___nodes___;for(i=0;i<b.length;i+=1)root.insertBefore(b[i],root.firstChild);return dom},q:function(text){star=!1;var query=parse_query(text,id);return"function"!=typeof hunter[query[0].op]&&error("ADsafe: Bad query: "+query[0]),new Bunch(quest(query,[root]))},remove:function(){purge_event_handlers(root),root.parent.removeElement(root),root=null},row:function(values){var td,i,tr=document.createElement("tr");for(i=0;i<values.length;i+=1)td=document.createElement("td"),td.appendChild(document.createTextNode(String(values[i]))),tr.appendChild(td);return new Bunch([tr])},tag:function(tag,type,name){var node;return"string"!=typeof tag&&error(),makeableTagName[tag]!==!0&&error("ADsafe: Bad tag: "+tag),node=document.createElement(tag),name&&(node.autocomplete="off",node.name=name),type&&(node.type=type),new Bunch([node])},text:function(text){var a,i;if(Array.isArray(text)){for(a=[],i=0;i<text.length;i+=1)a[i]=document.createTextNode(string_check(text[i]));return new Bunch(a)}return new Bunch([document.createTextNode(string_check(text))])}},"function"==typeof root.addEventListener?(root.addEventListener("focus",dom_event,!0),root.addEventListener("blur",dom_event,!0),root.addEventListener("mouseover",dom_event,!0),root.addEventListener("mouseout",dom_event,!0),root.addEventListener("mouseup",dom_event,!0),root.addEventListener("mousedown",dom_event,!0),root.addEventListener("mousemove",dom_event,!0),root.addEventListener("click",dom_event,!0),root.addEventListener("dblclick",dom_event,!0),root.addEventListener("keypress",dom_event,!0)):(root.onclick=dom_event,root.ondblclick=dom_event,root.onfocusin=dom_event,root.onfocusout=dom_event,root.onkeypress=dom_event,root.onmouseout=dom_event,root.onmousedown=dom_event,root.onmousemove=dom_event,root.onmouseover=dom_event,root.onmouseup=dom_event),[dom,Bunch.prototype]}var adsafe_id,adsafe_lib,cache_style_object,cache_style_node,ephemeral,flipflop,has_focus,hunter,name,pecker,result,star,the_range,value,banned={arguments:!0,callee:!0,caller:!0,constructor:!0,eval:!0,prototype:!0,stack:!0,unwatch:!0,valueOf:!0,watch:!0},defaultView=document.defaultView,interceptors=[],makeableTagName={a:!0,abbr:!0,acronym:!0,address:!0,area:!0,b:!0,bdo:!0,big:!0,blockquote:!0,br:!0,button:!0,canvas:!0,caption:!0,center:!0,cite:!0,code:!0,col:!0,colgroup:!0,dd:!0,del:!0,dfn:!0,dir:!0,div:!0,dl:!0,dt:!0,em:!0,fieldset:!0,font:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,hr:!0,i:!0,img:!0,input:!0,ins:!0,kbd:!0,label:!0,legend:!0,li:!0,map:!0,menu:!0,object:!0,ol:!0,optgroup:!0,option:!0,p:!0,pre:!0,q:!0,samp:!0,select:!0,small:!0,span:!0,strong:!0,sub:!0,sup:!0,table:!0,tbody:!0,td:!0,textarea:!0,tfoot:!0,th:!0,thead:!0,tr:!0,tt:!0,u:!0,ul:!0,var:!0};return hunter={"":function(node){var array,i,length,nodelist=node.getElementsByTagName(name);try{array=Array.prototype.slice.call(nodelist,0),result=result.length?result.concat(array):array}catch(ignore){for(length=nodelist.length,i=0;i<length;i+=1)result.push(nodelist[i])}},"+":function(node){for(node=node.nextSibling,name=name.toUpperCase();node&&!node.tagName;)node=node.nextSibling;node&&node.tagName===name&&result.push(node)},">":function(node){for(node=node.firstChild,name=name.toUpperCase();node;)node.tagName===name&&result.push(node),node=node.nextSibling},"#":function(){var n=document.getElementById(name);n.tagName&&result.push(n)},"/":function(node){var i,nodes=node.childNodes,length=nodes.length;for(i=0;i<length;i+=1)result.push(nodes[i])},"*":function(node){star=!0,walkTheDOM(node,function(node){result.push(node)},!0)}},pecker={".":function(node){return(" "+node.className+" ").indexOf(" "+name+" ")>=0},"&":function(node){return node.name===name},_:function(node){return node.type===name},"[":function(node){return"string"==typeof node[name]},"[=":function(node){var member=node[name];return"string"==typeof member&&member===value},"[!=":function(node){var member=node[name];return"string"==typeof member&&member!==value},"[^=":function(node){var member=node[name];return"string"==typeof member&&member.slice(0,member.length)===value},"[$=":function(node){var member=node[name];return"string"==typeof member&&member.slice(-member.length)===value},"[*=":function(node){var member=node[name];return"string"==typeof member&&member.indexOf(value)>=0},"[~=":function(node){var member=node[name];if("string"==typeof member)return member=" "+member+" ",member.indexOf(" "+value+" ")>=0},"[|=":function(node){var member=node[name];if("string"==typeof member)return member="-"+member+"-",member.indexOf("-"+value+"-")>=0},":blur":function(node){return node!==has_focus},":checked":function(node){return node.checked},":disabled":function(node){return node.tagName&&node.disabled},":enabled":function(node){return node.tagName&&!node.disabled},":even":function(node){var f;return!!node.tagName&&(f=flipflop,flipflop=!flipflop,f)},":focus":function(node){return node===has_focus},":hidden":function(node){return node.tagName&&"visible"!==getStyleObject(node).visibility},":odd":function(node){return!!node.tagName&&(flipflop=!flipflop)},":tag":function(node){return node.tagName},":text":function(node){return"#text"===node.nodeName},":trim":function(node){return"#text"!==node.nodeName||/\W/.test(node.nodeValue)},":unchecked":function(node){return node.tagName&&!node.checked},":visible":function(node){return node.tagName&&"visible"===getStyleObject(node).visibility}},{create:function(o){return reject_global(o),Object.create(o)},get:function(object,name){if(reject_global(object),!reject_property(object,name))return object[name];error()},go:function(id,f){var dom,fun,root,i,scripts;adsafe_id&&adsafe_id!==id&&error(),root=document.getElementById(id),"DIV"!==root.tagName&&error(),adsafe_id=null,scripts=root.getElementsByTagName("script"),(i=scripts.length-1)<0&&error();do{root.removeChild(scripts[i]),i-=1}while(i>=0);for(root=make_root(root,id),dom=root[0],i=0;i<interceptors.length;i+=1)if("function"==typeof(fun=interceptors[i]))try{fun(id,dom,adsafe_lib,root[1])}catch(e1){ADSAFE.log(e1)}try{f(dom,adsafe_lib)}catch(e2){ADSAFE.log(e2)}root=null,adsafe_lib=null},has:function(object,name){return owns(object,name)},id:function(id){adsafe_id&&error(),adsafe_id=id,adsafe_lib={}},isArray:Array.isArray||function(value){return"[object Array]"===Object.prototype.toString.apply(value)},keys:Object.keys,later:function(func,timeout){"function"==typeof func?setTimeout(func,timeout||0):error()},lib:function(name,f){adsafe_id&&!reject_name(name)||error("ADsafe lib violation."),adsafe_lib[name]=f(adsafe_lib)},log:function(s){window.console?console.log(s):"object"==typeof Debug?Debug.writeln(s):opera.postError(s)},remove:function(object,name){if(!reject_property(object,name))return void delete object[name];error()},set:function(object,name,value){if(reject_global(object),!reject_property(object,name))return void(object[name]=value);error()},_intercept:function(f){interceptors.push(f)}}}();return window.ADSAFE=ADSAFE});